<Window x:Class="RectangleWindows.PreferencesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Rectangle Windows - Preferences" Height="600" Width="800"
        WindowStartupLocation="CenterScreen" ResizeMode="CanResize">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <TabControl Grid.Row="1" Margin="0,10,0,0">
            <TabItem Header="General">
                <ScrollViewer>
                    <StackPanel Margin="10">
                        <GroupBox Header="Window Gaps" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <Label Content="Gap Size (pixels):"/>
                                <Slider x:Name="GapSizeSlider" Minimum="0" Maximum="50" Value="0" 
                                        ValueChanged="GapSizeSlider_ValueChanged" TickFrequency="5" IsSnapToTickEnabled="True"/>
                                <TextBlock x:Name="GapSizeLabel" Text="0 px" Margin="0,5,0,0"/>
                            </StackPanel>
                        </GroupBox>
                        
                        <GroupBox Header="Size Adjustments" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <Label Content="Size Offset (pixels):"/>
                                <TextBox x:Name="SizeOffsetTextBox" Text="30" TextChanged="SizeOffsetTextBox_TextChanged"/>
                                
                                <Label Content="Width Step Size (pixels):" Margin="0,10,0,0"/>
                                <TextBox x:Name="WidthStepSizeTextBox" Text="30" TextChanged="WidthStepSizeTextBox_TextChanged"/>
                            </StackPanel>
                        </GroupBox>
                        
                        <GroupBox Header="Almost Maximize" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <Label Content="Width Factor (0.0 - 1.0):"/>
                                <Slider x:Name="AlmostMaximizeWidthSlider" Minimum="0.5" Maximum="1.0" Value="0.9" 
                                        ValueChanged="AlmostMaximizeWidthSlider_ValueChanged" TickFrequency="0.1" IsSnapToTickEnabled="True"/>
                                <TextBlock x:Name="AlmostMaximizeWidthLabel" Text="0.9" Margin="0,5,0,0"/>
                                
                                <Label Content="Height Factor (0.0 - 1.0):" Margin="0,10,0,0"/>
                                <Slider x:Name="AlmostMaximizeHeightSlider" Minimum="0.5" Maximum="1.0" Value="0.9" 
                                        ValueChanged="AlmostMaximizeHeightSlider_ValueChanged" TickFrequency="0.1" IsSnapToTickEnabled="True"/>
                                <TextBlock x:Name="AlmostMaximizeHeightLabel" Text="0.9" Margin="0,5,0,0"/>
                            </StackPanel>
                        </GroupBox>
                        
                        <GroupBox Header="Options" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="WindowSnappingCheckBox" Content="Enable Window Snapping (drag to snap)" 
                                          Checked="WindowSnappingCheckBox_Checked" Unchecked="WindowSnappingCheckBox_Unchecked"/>
                                <CheckBox x:Name="MoveCursorCheckBox" Content="Move cursor with window" 
                                          Checked="MoveCursorCheckBox_Checked" Unchecked="MoveCursorCheckBox_Unchecked"/>
                                <CheckBox x:Name="UseCursorScreenDetectionCheckBox" Content="Use cursor for screen detection" 
                                          Checked="UseCursorScreenDetectionCheckBox_Checked" Unchecked="UseCursorScreenDetectionCheckBox_Unchecked"/>
                                <CheckBox x:Name="LaunchOnLoginCheckBox" Content="Launch on login" 
                                          Checked="LaunchOnLoginCheckBox_Checked" Unchecked="LaunchOnLoginCheckBox_Unchecked"/>
                                <CheckBox x:Name="SubsequentExecutionCycleCheckBox" Content="Cycle sizes on repeated commands" 
                                          Checked="SubsequentExecutionCycleCheckBox_Checked" Unchecked="SubsequentExecutionCycleCheckBox_Unchecked"/>
                            </StackPanel>
                        </GroupBox>
                        
                        <GroupBox Header="Todo Mode" Margin="0,0,0,10">
                            <StackPanel Margin="10">
                                <CheckBox x:Name="TodoModeCheckBox" Content="Enable Todo Mode" 
                                          Checked="TodoModeCheckBox_Checked" Unchecked="TodoModeCheckBox_Unchecked"/>
                                <Label Content="Sidebar Width (pixels):" Margin="0,10,0,0"/>
                                <TextBox x:Name="TodoSidebarWidthTextBox" Text="400" TextChanged="TodoSidebarWidthTextBox_TextChanged"/>
                                <CheckBox x:Name="TodoSidebarRightCheckBox" Content="Sidebar on right side" 
                                          Checked="TodoSidebarRightCheckBox_Checked" Unchecked="TodoSidebarRightCheckBox_Unchecked" Margin="0,10,0,0"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <TabItem Header="Shortcuts">
                <ScrollViewer>
                    <StackPanel Margin="10">
                        <TextBlock Text="Keyboard shortcuts can be customized here. Click on a shortcut field and press your desired key combination." 
                                   TextWrapping="Wrap" Margin="0,0,0,10"/>
                        <DataGrid x:Name="ShortcutsDataGrid" AutoGenerateColumns="False" CanUserAddRows="False" 
                                  HeadersVisibility="Column" GridLinesVisibility="All">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Action" Binding="{Binding ActionName}" IsReadOnly="True" Width="*"/>
                                <DataGridTextColumn Header="Shortcut" Binding="{Binding ShortcutDisplay}" IsReadOnly="True" Width="*"/>
                                <DataGridTemplateColumn Header="Change" Width="100">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button Content="Change..." Click="ChangeShortcut_Click" Tag="{Binding}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <TabItem Header="Ignored Apps">
                <StackPanel Margin="10">
                    <TextBlock Text="Applications in this list will be ignored by Rectangle Windows." 
                               TextWrapping="Wrap" Margin="0,0,0,10"/>
                    <ListBox x:Name="IgnoredAppsListBox" Height="300" Margin="0,0,0,10"/>
                    <StackPanel Orientation="Horizontal">
                        <TextBox x:Name="NewIgnoredAppTextBox" Width="200" Margin="0,0,10,0"/>
                        <Button Content="Add" Click="AddIgnoredApp_Click"/>
                        <Button Content="Remove" Click="RemoveIgnoredApp_Click" Margin="10,0,0,0"/>
                    </StackPanel>
                </StackPanel>
            </TabItem>
        </TabControl>
        
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="OK" Width="75" Height="25" Margin="0,0,10,0" Click="OKButton_Click"/>
            <Button Content="Cancel" Width="75" Height="25" Click="CancelButton_Click"/>
        </StackPanel>
    </Grid>
</Window>

